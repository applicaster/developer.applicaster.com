# How to test your provider locally

Zapp-pipes provides a development kit package which allows easy local testing of a provider. Using this development kit requires an NPM token as it is a private npm package. In order to be able to use the development kit, follow the following steps :

1. ask your applicaster representative for an npm token, define it as an environment variable on your system, and [set up your `.npmrc` file to use this token](http://blog.npmjs.org/post/118393368555/deploying-with-npm-private-modules)

2. install the development kit by running `npm install @applicaster/zapp-pipes-dev-kit --save` or `yarn add @applicaster/zapp-pipes-dev-kit`

3. install `nodemon` as a dev dependency by running `npm install --save-dev nodemon` or `yarn add nodemon --dev`. This will enable automatic reloading of the server when you edit the code. 

4. Create a file at the root of your project folder called `server.js` with the following content : 

```javascript
const {createZappPipesServer} = require('@applicaster/zapp-pipes-dev-kit');
const provider = require('./src');

const zappPipesServer = createZappPipesServer({ providers: [provider] });
zappPipesServer.startServer();
```

4. in your package.json file, [add a `start` script](https://docs.npmjs.com/misc/scripts) with the following command `node_modules/.bin/nodemon server.js --exec node_modules/.bin/babel-node`. This command assumes your provider is using [babel](http://babeljs.io) as a transpiler

4. Execute the start script by running `npm start` or `yarn start`.

From this point, you should have a local node.js server which enables you to test your provider by entering the feed url in a web browser. the local node.js server should be accessible at `http://localhost:8080`.
However, since you are now running on a web server, the request needs to go through local node.js server's url. To test a feed url in the browser, you will need to change the feed url from the pattern
`{provider-name}://fetchData?param1=param1value&param2=param2value`
to 
`http://localhost:8080/{provider-name}/fetchData?param1=param1value&param2=param2value`

For instance, if you have a feed url of the type : `my-provider://fetchData?type=feed&id=10`, the test request in the browser will become `http://localhost:8080/my-provider/fetchData?type=feed&id=10`



NB : When running the provider as a server for testing, you don't have access to all the app bridge data. You can specify a set of mocked app data to be used for testing when calling the `createZappPipesServer` function in the `server.js` file, 
