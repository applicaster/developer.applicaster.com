# Library Logic
Zapp pipes is a javascript library that exposes a single 'get' method to our apps in order to load data. 
From the app, this get method is invoked with a url that has a specific pattern, and a callback to handle the data returned by zapp-pipes.

Internally, zapp-pipes goes through several modules : 
- the router will parse the url invoked from the app to identify how to handle it, i.e. to know which provider to call with which parameters. Urls are of the form `provider-name://fetchData?type=request_type&otherParams=...`
- the provider wrapper will call the requested provider, and inject it with a toolbelt object to handle responses and errors, and get access to some app Data (account id, uuid, bundle identifier...).
- when the provider returns data, it goes through the resolver - which does nothing for now, but will be able to decorate data in the future - which forwards the data back to the router
- the router invokes the native app's callback with the returned data so the data can be loaded inside the app.

# JS Bridge

Zapp-pipes is evaluated inside a javascript bridge which relies on the JavaScriptCore api. This js environment has some limitations :
- it only allows ECMAScript 5 syntax (this is why the JS code uses babel to transpile to es5)
- it's missing some fundamental browser objects such as the `window` global and the `XMLHttpRequest` object. 
In order to make the js library work as intended these too features are polyfilled in the bridge. So the js code running in the zapp-pipes bridge can invoke the XHR object, and attach properties to `window`

To perform network requests inside the js code, we advise to use the axios library, which has been tested and works reliable for get and post requests - including headers settings.

The JS Bridge also exposes a method to get some data from the app. So far, this method provides : 
- the account id
- the broadcaster id
- the bundle identifier
- the device uuid
- the platform used
