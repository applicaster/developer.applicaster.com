# Feed API

# DS Output Doc Guide

## The structure of the model
```json
{
  "type": {
    "value": "feed"
  },
  "title": "<TITLE>",
  "entry": [
    {
      "type": {
        "value": "<article/link/imageGallery/video/image/playlist>"
      },
      "id": "<ID>",
      "title": "<TITLE>",
      "summary": "<SUMMARY>",
      "published": "<PUBLISH DATE - ISO8601>",
      "updated": "<UPDATE DATE - ISO8601>",
      "author": {
        "name": "<AUTHOR NAME>"
      },
      "media_group": [
        {
          "type": "<IMAGE/VIDEO/AUDIO>",
          "media_item": [
            {
              "src": "http://your.link.here.com",
              "key": "<IMAGE KEY 1>",
              "type": "<image/video/audio>"
            },
            {
              "src": "http://another.link.here.com",
              "key": "<IMAGE KEY 2>",
              "type": "<image/video/audio>"
            }
          ]
        },
        {
          "type": "<IMAGE/VIDEO/AUDIO>",
          "media_item": [
            {
              "src": "http://your.link.here.com",
              "key": "<IMAGE KEY 1>",
              "type": "<image/video/audio>"
            },
            {
              "src": "http://another.link.here.com",
              "key": "<IMAGE KEY 2>",
              "type": "<image/video/audio>"
            }
          ]
        }
      ],
      "content": {
        "type": "<DESCRIBED BELOW>",
        "src": "<DESCRIBED BELOW>",
        "content": "<DESCRIBED BELOW>"
      },
      "link": {
        "type": "<DESCRIBED BELOW>",
        "rel": "<DESCRIBED BELOW>",
        "href": "<DESCRIBED BELOW>"
      },
      "extensions": {
        "<Custom Key 1>": "<Custom Value 1>",
        "<Custom Key 2>": false,
        "<Custom Key 3>": {
          "Inner Key 1": true,
          "Inner Key 2": "String",
          "Inner Key 3": 1
        }
      }
    }
  ]
}
```

## Description of the fields
### ID - required
Unique identifier string

### Type - required
The entry element MUST be added and its value attribute MUST be set to one of the following:

- For Article use:
```json
 "type": {
    "value": "article"
  }
```
- For Video (HLS or YouTube) use:
```json
 "type": {
    "value": "video"
  }
```
- For Image-Gallery:
```json
 "type": {
    "value": "imageGallery"
  }
```
- For Image use:
```json
 "type": {
    "value": "image"
  }
```
- For Link use:
```json
 "type": {
    "value": "link"
  }
```
- For Playlist use:
```json
 "type": {
    "value": "playlist"
  }
```
### Title
The title element represents the title of the entry.

### Summary
If added the field will be visible for the end user.

### Link
- If a link element exists and it's "rel" attribute is set to "alternate", and it's "type" attribute is set to "text/html" - the href value of the link will be used as the shared link URL of the entry.
```json
"link": {
  "type": "text/html",
  "rel": "alternate",
  "href": "<SHARED LINK URL>"
}
```

- If a link element exists and it's "rel" attribute is set to "self", and the entry type is "link" - the "href" value of the link will be used as a link to the article.
```json
"link": {
  "rel": "self",
  "href": "<LINK OF THE ENTRY>"
}
```



### Published
If added the field will be visible for the end user - should follow ISO8601.

### Updated
If added the field will be visible for the end user - should follow ISO8601.

### Content
The content element type attribute depends on the Entry type:

- For Article use html
- For Image use one of the following types:
image/png, image/gif, image/jpg, image/jpeg
- For Video use video/hls
- for YouTube Video use youtube-id
- For Image-gallery use application/atom+xml
- Article type MUST contain the escaped embedded HTML markup within. Any HTML tags that are not of the following ```html <p>, <a>, <strong>,  <h2>, <h3>, <h4>, <h5>, <img>``` Aren't recommended and can cause bad article formatting.

- Image type MUST have a src attribute with the link to the full sized image.

- Image-gallery type MUST have a src attribute with the link to an Applicaster Atom Feed that holds image entries with an element set to
```javascript
"type": {
    "value": "image"
}
```
- Entries without the it will be discarded.

- YouTube Video type MUST have a src attribute with the YouTube video ID.

### Applicaster media group

The media_group element groups media assets from the same type. Following are the supported group types:

- image: Is an image that will be used to show the item in a collection view
detailed-view: Relevant only for articles - holds the article's item image in full view mode.
- video: Relevant only for articles - holds the article's item video.
- audio: Relevant only for articles - holds the - article's item audio.

### Applicaster media item

The media_item element MUST be contained inside a  media_group element.
- type: the type of the media item. Can be one of the following - image, audio, video.
- src: the url of the media item
- key: differentiates the media items in the media group

### Extensions
- Used for client-specific fields.
- Keys are of String type
- Values are of ANY type



## Data output

All providers must return either a feed or an entry according to the following format : 
```javascript
const feed = {
  title: '', // title of the feed
  author: { name: 'author name' },
  id: '', // 'id of the feed'
  summary: '', // description of the feed
  link: {
    type: 'atom',
    rel: 'self',
    href: '', // url to get the feed
  },
  type: {
    value: '' // either feed, or the entry type
  },
  mediaGroup: [{
    type: '', // type of media asset : thumbnail...
    media_item: {
      scale: 'small|large',
      src: '', // url of the media asset
    }
  }] // mediaGroup can contain any number of assets
  updated: '' // ISO 8601 timestamp of the latest feed update*,
  entry: [] // array of feed entries
  extensions: {}, // all other data you want to pass
};

const entry = {
  id: '',
  title: '',
  summary: '',
  author: { name: '' },
  type: { value: 'feed|video|article|channel|gallery' },
  link: {
    type: 'atom',
    rel: 'self',
    href: '', // url to get the entry
  },
  ui_tag: '', // may be required in some cases
  screen_type: '', // may be required in some cases
  mediaGroup: [{}], // same as above,
  updated: '',
  extensions: {},
}
```

* https://en.wikipedia.org/wiki/ISO_8601#Combined_date_and_time_representations
